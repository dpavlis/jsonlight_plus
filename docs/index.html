<!doctype html>
<html lang="en">

<head>
  <title>JSON Light+ - A JSON Viewer/Editor That Actually Shows Your Strings</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="A browser-based JSON viewer/editor with proper multi-line string display. Features raw string toggle, JSONL support, and format-preserving text rendering. Perfect for API docs, logs, and debugging.">
  <meta name="keywords" content="JSON viewer, JSON editor, JSON formatter, JSONL, multi-line strings, JSON parser, browser tool, API documentation, log analysis, debugging">
  <meta name="author" content="bluerose73">
  <meta name="robots" content="index, follow">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://bluerose73.github.io/jsonlight/">
  <meta property="og:title" content="JSON Light+ - A JSON Viewer That Actually Shows Your Strings">
  <meta property="og:description" content="A browser-based JSON viewer with proper multi-line string display. Features raw string toggle, JSONL support, and format-preserving text rendering.">
  <meta property="og:image" content="https://bluerose73.github.io/jsonlight/demo.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://bluerose73.github.io/jsonlight/">
  <meta property="twitter:title" content="JSON Light+ - A JSON Viewer That Actually Shows Your Strings">
  <meta property="twitter:description" content="A browser-based JSON viewer with proper multi-line string display. Features raw string toggle, JSONL support, and format-preserving text rendering.">
  <meta property="twitter:image" content="https://bluerose73.github.io/jsonlight/demo.png">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://bluerose73.github.io/jsonlight/">
  
  <link href="styles/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles/jsonlight.css">
  <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="icon/favicon-16x16.png">
  <link rel="manifest" href="icon/site.webmanifest">
</head>

<body>
  <main>

    <div class="sidebar d-flex flex-column flex-shrink-0 p-3 bg-light">
      <div class="fw-bold fs-2 ms-auto me-auto">JSON Light+</div>
      <hr>
      <div>
        <label for="filepicker" class="form-label">Open file in JSON mode</label>
        <input type="file" class="form-control form-control-sm mb-2" id="filepicker" name="filepicker" accept=".json, .jsonl, .geojson">
      </div>
      <div>
        <label for="jsonlpicker" class="form-label">Open file in JSONL mode</label>
        <input type="file" class="form-control form-control-sm mb-2" id="jsonlpicker" name="jsonlpicker" accept=".json, .jsonl, .geojson">
      </div>
      <div id="jsonl-controls" class="mb-2" style="display: none;">
        <div class="d-flex align-items-center gap-2 mb-2">
          <button type="button" class="btn btn-outline-secondary btn-sm" id="prev-line" title="Go to previous JSONL line">‹</button>
          <div class="flex-grow-1">
            <div class="input-group input-group-sm">
              <input type="number" class="form-control" id="line-input" min="1" value="1">
              <span class="input-group-text" id="total-lines">/ 0</span>
            </div>
          </div>
          <button type="button" class="btn btn-outline-secondary btn-sm" id="next-line" title="Go to next JSONL line">›</button>
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">Save / Download</label>
        <div class="d-flex flex-wrap gap-2">
          <button type="button" class="btn btn-outline-success btn-sm flex-fill" id="download-json" disabled title="Download the current view as JSON">Save JSON</button>
          <button type="button" class="btn btn-outline-success btn-sm flex-fill" id="download-jsonl" disabled title="Download the current view as JSON Lines">Save JSONL</button>
        </div>
      </div>
      <div class="mt-3">
        <div class="d-flex align-items-center gap-2 mb-2">
          <label for="paste" class="form-label mb-0 flex-grow-1">Paste here</label>
          <button class="btn btn-light btn-sm toggle-button" type="button" id="paste-toggle-button" data-bs-toggle="collapse" data-bs-target="#paste-collapse" aria-expanded="false" aria-controls="paste-collapse" title="Show or hide the paste area">+</button>
        </div>
        <div class="collapse" id="paste-collapse">
          <textarea class="form-control form-control-sm" id="paste" rows="10"></textarea>
        </div>
      </div>
      <div class="mt-3">
        <div class="d-flex gap-2">
          <button type="button" class="btn btn-outline-primary btn-sm flex-fill" id="expand-all" title="Expand all nodes">Expand All</button>
          <button type="button" class="btn btn-outline-secondary btn-sm flex-fill" id="collapse-all" title="Collapse all nodes">Collapse All</button>
        </div>
      </div>
      <div class="mt-3">
        <label class="form-label">Top-level Navigation</label>
        <div class="d-flex justify-content-between align-items-center mb-2 small text-muted">
          <span>Total items</span>
          <span id="top-level-count">0</span>
        </div>
        <div class="input-group input-group-sm">
          <input type="number" class="form-control" id="top-level-index-input" min="1" step="1" placeholder="Index or line #">
          <button class="btn btn-outline-secondary" type="button" id="top-level-go" title="Jump to the specified item">Go</button>
        </div>
        <div class="text-danger small" id="top-level-error"></div>
      </div>
      <div class="mt-3">
        <label for="search-input" class="form-label">Search</label>
        <div class="input-group input-group-sm mb-2">
          <input type="text" class="form-control" id="search-input" placeholder="Search JSON" list="search-history-options">
          <datalist id="search-history-options"></datalist>
        </div>
        <div class="d-flex gap-2 mb-2">
          <button class="btn btn-outline-secondary btn-sm flex-fill" type="button" id="search-prev" aria-label="Previous match" title="Go to previous search match">[&lt;]</button>
          <button class="btn btn-outline-secondary btn-sm flex-fill" type="button" id="search-next" aria-label="Next match" title="Go to next search match">[&gt;]</button>
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <div class="form-check form-check-inline mb-0">
            <input class="form-check-input" type="checkbox" id="search-regex">
            <label class="form-check-label" for="search-regex">Regex</label>
          </div>
          <small class="text-muted" id="search-status">0 / 0</small>
        </div>
        <div class="text-danger small" id="search-error"></div>
        <div class="mt-2">
          <label for="replace-input" class="form-label">Replace</label>
          <div class="input-group input-group-sm mb-2">
            <input type="text" class="form-control" id="replace-input" placeholder="Replacement text" list="replace-history-options">
            <datalist id="replace-history-options"></datalist>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-outline-secondary btn-sm flex-fill" type="button" id="replace-all" title="Replace every match">[ALL]</button>
            <button class="btn btn-outline-secondary btn-sm flex-fill" type="button" id="replace-current" title="Replace current match">[R]</button>
          </div>
        </div>
      </div>
      <div class="form-check mt-3">
        <input class="form-check-input" type="checkbox" id="toggle-editing" checked>
        <label class="form-check-label" for="toggle-editing">Enable editing</label>
      </div>
      <div class="mb-auto"></div>
      <div id="file-name-display" class="text-muted small text-break" style="display: none;" title="">
        No file selected
      </div>
      <hr>
      <div>
        <a href="https://github.com/bluerose73/jsonlight" class="link-dark">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-github"
            viewBox="0 0 16 16">
            <path
              d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8" />
          </svg>
        </a>
      </div>
    </div>

    <div class="container-fluid p-3 overflow-y-auto font-monospace" id="view">
    </div>

    <div class="modal fade" id="property-editor-modal" tabindex="-1" aria-labelledby="property-editor-title" aria-hidden="true">
      <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="property-editor-title">Property Editor</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" title="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-2 text-muted small" id="property-editor-path">root</div>
            <textarea class="form-control font-monospace" id="property-editor-input" rows="18"></textarea>
            <div class="d-flex justify-content-between align-items-center mt-2 small text-muted">
              <span id="property-editor-caret">Ln 1, Col 1</span>
            </div>
            <div class="mt-3">
              <div class="d-flex justify-content-between align-items-center mb-1">
                <span class="small text-muted">Find / Replace</span>
                <span class="small text-muted" id="property-editor-search-status"></span>
              </div>
              <div class="input-group input-group-sm mb-2">
                <input type="text" class="form-control" id="property-editor-search-input" placeholder="Find text">
                <button class="btn btn-outline-secondary" type="button" id="property-editor-find-prev" title="Find previous match">Prev</button>
                <button class="btn btn-outline-secondary" type="button" id="property-editor-find-next" title="Find next match">Next</button>
              </div>
              <div class="input-group input-group-sm mb-2">
                <input type="text" class="form-control" id="property-editor-replace-input" placeholder="Replace with">
                <button class="btn btn-outline-secondary" type="button" id="property-editor-replace-current" title="Replace current selection">Replace</button>
                <button class="btn btn-outline-secondary" type="button" id="property-editor-replace-all" title="Replace every occurrence">Replace All</button>
              </div>
              <div class="text-danger small" id="property-editor-search-error"></div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" title="Discard changes">Cancel</button>
            <button type="button" class="btn btn-primary" id="property-editor-apply" title="Apply edits">Apply</button>
          </div>
        </div>
      </div>
    </div>

    <script src="scripts/bootstrap.bundle.min.js"></script>
    <script type="module">
      // Import Tauri API if running in Tauri context
      if (window.__TAURI__) {
        import('https://cdn.jsdelivr.net/npm/@tauri-apps/api@2/event').then(module => {
          const { listen } = module;
          
          // Listen for "open-with" events from Rust backend
          listen('open-with', (event) => {
            console.log('Open with files:', event.payload);
            const files = event.payload;
            
            if (files && files.length > 0) {
              const file = files[0]; // Handle first file for now
              handleOpenWithFile(file.path, file.mode);
            }
          });
        }).catch(err => {
          console.log('Tauri API not available:', err);
        });
      }
    </script>
    <script src="scripts/jsonlight.js"></script>
  </main>
</body>

</html>